<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 630" fill="none">
  <style>
    @media (prefers-color-scheme: dark) {
      .bg { fill: #0e0c0a; }
      .text-primary { fill: #ede7df; }
      .text-secondary { fill: #9a8e82; }
      .accent { fill: #daa04e; }
      .accent-stroke { stroke: #daa04e; }
      .box-bg { fill: #1a1714; }
      .box-stroke { stroke: rgba(237,231,223,0.08); }
      .green { fill: #6ade8a; }
      .blue { fill: #6ab4de; }
      .purple { fill: #b48ade; }
      .orange { fill: #dea86a; }
      .red { fill: #de6a6a; }
      .pyramid { fill: none; }
    }
    @media (prefers-color-scheme: light) {
      .bg { fill: #f8f4ee; }
      .text-primary { fill: #1a1410; }
      .text-secondary { fill: #6e6259; }
      .accent { fill: #c48a3f; }
      .accent-stroke { stroke: #c48a3f; }
      .box-bg { fill: #f0ebe3; }
      .box-stroke { stroke: rgba(26,20,16,0.1); }
      .green { fill: #2a9e4a; }
      .blue { fill: #3a7fbf; }
      .purple { fill: #7a3abf; }
      .orange { fill: #bf7a2a; }
      .red { fill: #bf3a3a; }
      .pyramid { fill: none; }
    }
  </style>
  <rect class="bg" width="1200" height="630"/>

  <!-- Testing Pyramid -->
  <!-- Level 5 - Golden (top) -->
  <polygon class="accent-stroke" points="300,50 370,50 400,50" stroke-width="0" fill="none"/>
  <rect x="250" y="40" width="200" height="40" rx="8" fill="none" class="box-stroke" stroke-width="1.5"/>
  <rect x="250" y="40" width="200" height="40" rx="8" class="box-bg"/>
  <text class="purple" x="350" y="65" text-anchor="middle" font-family="system-ui,sans-serif" font-size="12" font-weight="700">Golden Tests</text>

  <!-- Level 4 - Integration -->
  <rect x="210" y="90" width="280" height="40" rx="8" class="box-bg"/>
  <rect x="210" y="90" width="280" height="40" rx="8" fill="none" class="box-stroke" stroke-width="1.5"/>
  <text class="red" x="350" y="115" text-anchor="middle" font-family="system-ui,sans-serif" font-size="12" font-weight="700">Integration Tests</text>

  <!-- Level 3 - Widget -->
  <rect x="170" y="140" width="360" height="40" rx="8" class="box-bg"/>
  <rect x="170" y="140" width="360" height="40" rx="8" fill="none" class="box-stroke" stroke-width="1.5"/>
  <text class="orange" x="350" y="165" text-anchor="middle" font-family="system-ui,sans-serif" font-size="12" font-weight="700">Widget Tests</text>

  <!-- Level 2 - Controller -->
  <rect x="130" y="190" width="440" height="40" rx="8" class="box-bg"/>
  <rect x="130" y="190" width="440" height="40" rx="8" fill="none" class="box-stroke" stroke-width="1.5"/>
  <text class="blue" x="350" y="215" text-anchor="middle" font-family="system-ui,sans-serif" font-size="12" font-weight="700">Controller + Service Unit Tests</text>

  <!-- Level 1 - Domain -->
  <rect x="90" y="240" width="520" height="40" rx="8" class="box-bg"/>
  <rect x="90" y="240" width="520" height="40" rx="8" fill="none" class="accent-stroke" stroke-width="2"/>
  <text class="green" x="350" y="265" text-anchor="middle" font-family="system-ui,sans-serif" font-size="12" font-weight="700">Domain Entity Unit Tests (Pure Dart)</text>

  <!-- Pyramid outline -->
  <polygon class="accent-stroke" points="350,30 620,285 80,285" stroke-width="2" fill="none" stroke-dasharray="6 3"/>

  <!-- Right side: Key concepts -->
  <rect class="box-bg" x="680" y="40" width="460" height="80" rx="14"/>
  <rect class="box-stroke" x="680" y="40" width="460" height="80" rx="14" fill="none" stroke-width="1.5"/>
  <text class="accent" x="700" y="68" font-family="system-ui,sans-serif" font-size="15" font-weight="700">Robot Pattern</text>
  <text class="text-secondary" x="700" y="90" font-family="system-ui,sans-serif" font-size="12">Write finders once → reuse in Widget, Integration, Golden</text>
  <text class="text-secondary" x="700" y="107" font-family="monospace" font-size="11">r.today.tapTask(0)  r.today.expectTaskCompleted(0)</text>

  <rect class="box-bg" x="680" y="135" width="460" height="80" rx="14"/>
  <rect class="box-stroke" x="680" y="135" width="460" height="80" rx="14" fill="none" stroke-width="1.5"/>
  <text class="blue" x="700" y="163" font-family="system-ui,sans-serif" font-size="15" font-weight="700">Infrastructure</text>
  <text class="text-secondary" x="700" y="185" font-family="monospace" font-size="12">mocks.dart → all Mock classes (mocktail)</text>
  <text class="text-secondary" x="700" y="202" font-family="monospace" font-size="12">test_data.dart → make*() factory functions</text>

  <rect class="box-bg" x="680" y="230" width="220" height="55" rx="14"/>
  <rect class="box-stroke" x="680" y="230" width="220" height="55" rx="14" fill="none" stroke-width="1.5"/>
  <text class="green" x="700" y="255" font-family="system-ui,sans-serif" font-size="13" font-weight="700">Mock</text>
  <text class="text-secondary" x="700" y="273" font-family="system-ui,sans-serif" font-size="11">when/verify precision</text>

  <rect class="box-bg" x="920" y="230" width="220" height="55" rx="14"/>
  <rect class="box-stroke" x="920" y="230" width="220" height="55" rx="14" fill="none" stroke-width="1.5"/>
  <text class="orange" x="940" y="255" font-family="system-ui,sans-serif" font-size="13" font-weight="700">Fake</text>
  <text class="text-secondary" x="940" y="273" font-family="system-ui,sans-serif" font-size="11">Realistic behavior</text>

  <!-- Code snippets area -->
  <rect class="box-bg" x="60" y="310" width="530" height="100" rx="12"/>
  <rect class="box-stroke" x="60" y="310" width="530" height="100" rx="12" fill="none" stroke-width="1"/>
  <text class="text-secondary" x="80" y="335" font-family="monospace" font-size="11">// Service test pattern</text>
  <text class="text-primary" x="80" y="355" font-family="monospace" font-size="11">setUp(() => service = DisciplineService(mockRepo));</text>
  <text class="text-primary" x="80" y="375" font-family="monospace" font-size="11">when(() => mockRepo.save(any())).thenAnswer(...);</text>
  <text class="green" x="80" y="395" font-family="monospace" font-size="11">verify(() => mockRepo.save(any())).called(1);</text>

  <rect class="box-bg" x="620" y="310" width="520" height="100" rx="12"/>
  <rect class="box-stroke" x="620" y="310" width="520" height="100" rx="12" fill="none" stroke-width="1"/>
  <text class="text-secondary" x="640" y="335" font-family="monospace" font-size="11">// Controller test pattern</text>
  <text class="text-primary" x="640" y="355" font-family="monospace" font-size="11">final container = ProviderContainer(overrides: [...]);</text>
  <text class="text-primary" x="640" y="375" font-family="monospace" font-size="11">addTearDown(container.dispose);</text>
  <text class="green" x="640" y="395" font-family="monospace" font-size="11">final state = await container.read(provider.future);</text>

  <!-- Title -->
  <text class="text-primary" x="600" y="480" text-anchor="middle" font-family="system-ui,sans-serif" font-size="36" font-weight="800">Flutter Testing That Works</text>
  <text class="accent" x="600" y="520" text-anchor="middle" font-family="system-ui,sans-serif" font-size="20" font-weight="500">Unit  ·  Widget  ·  Integration  ·  Robot Pattern</text>
  <text class="text-secondary" x="600" y="600" text-anchor="middle" font-family="system-ui,sans-serif" font-size="14">Flutter + Mocktail + Riverpod</text>
</svg>
